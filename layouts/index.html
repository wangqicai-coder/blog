{{- define "main" }}

{{- $posts := where site.RegularPages "Section" "posts" }}

<div class="home-content">
    <h1 class="home-title">不确定性的智慧</h1>
    <p class="home-subtitle">关于风险、时间与决策的思维框架</p>


    {{- if gt (len $posts) 0 }}

    {{- /* Group posts by category */ -}}
    {{- $risk := slice }}
    {{- $cognition := slice }}
    {{- $time := slice }}
    {{- $decision := slice }}
    {{- $other := slice }}

    {{- range $posts }}
        {{- $cats := .Params.categories }}
        {{- if $cats }}
            {{- if in $cats "风险的本质" }}
                {{- $risk = $risk | append . }}
            {{- else if in $cats "认知与现实" }}
                {{- $cognition = $cognition | append . }}
            {{- else if in $cats "时间的力量" }}
                {{- $time = $time | append . }}
            {{- else if in $cats "决策框架" }}
                {{- $decision = $decision | append . }}
            {{- else }}
                {{- $other = $other | append . }}
            {{- end }}
        {{- else }}
            {{- $other = $other | append . }}
        {{- end }}
    {{- end }}

    {{- if gt (len $risk) 0 }}
    <div class="category-section">
        <h2 class="category-title">风险的本质</h2>
        <ul class="post-list">
            {{- range $risk }}
            <li class="post-item">
                <a href="{{ .Permalink }}">{{ .Title }}</a>
            </li>
            {{- end }}
        </ul>
    </div>
    {{- end }}

    {{- if gt (len $cognition) 0 }}
    <div class="category-section">
        <h2 class="category-title">认知与现实</h2>
        <ul class="post-list">
            {{- range $cognition }}
            <li class="post-item">
                <a href="{{ .Permalink }}">{{ .Title }}</a>
            </li>
            {{- end }}
        </ul>
    </div>
    {{- end }}

    {{- if gt (len $time) 0 }}
    <div class="category-section">
        <h2 class="category-title">时间的力量</h2>
        <ul class="post-list">
            {{- range $time }}
            <li class="post-item">
                <a href="{{ .Permalink }}">{{ .Title }}</a>
            </li>
            {{- end }}
        </ul>
    </div>
    {{- end }}

    {{- if gt (len $decision) 0 }}
    <div class="category-section">
        <h2 class="category-title">决策框架</h2>
        <ul class="post-list">
            {{- range $decision }}
            <li class="post-item">
                <a href="{{ .Permalink }}">{{ .Title }}</a>
            </li>
            {{- end }}
        </ul>
    </div>
    {{- end }}

    {{- if gt (len $other) 0 }}
    <div class="category-section">
        <h2 class="category-title">其他</h2>
        <ul class="post-list">
            {{- range $other }}
            <li class="post-item">
                <a href="{{ .Permalink }}">{{ .Title }}</a>
            </li>
            {{- end }}
        </ul>
    </div>
    {{- end }}

    {{- end }}
</div>

{{- end }}
